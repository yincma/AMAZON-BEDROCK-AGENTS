{
  "openapi": "3.0.0",
  "info": {
    "title": "Compiler Agent API",
    "description": "File compilation agent for presentations",
    "version": "1.0.0"
  },
  "paths": {
    "/compile-presentation": {
      "post": {
        "operationId": "compilePresentation",
        "summary": "Compile all elements into final presentation",
        "description": "Assemble all elements into final PPTX file",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "presentationId": {
                    "type": "string",
                    "description": "ID of the presentation"
                  },
                  "outputFormat": {
                    "type": "string",
                    "description": "Output format (pptx, pdf, html)",
                    "default": "pptx"
                  },
                  "templateId": {
                    "type": "string",
                    "description": "Template to use for styling"
                  },
                  "includeSpeakerNotes": {
                    "type": "boolean",
                    "description": "Include speaker notes in presentation",
                    "default": true
                  },
                  "includeImages": {
                    "type": "boolean",
                    "description": "Include images in presentation",
                    "default": true
                  },
                  "qualitySettings": {
                    "type": "object",
                    "description": "Quality and optimization settings"
                  }
                },
                "required": ["presentationId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Presentation compiled successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "downloadUrl": {
                      "type": "string",
                      "description": "URL to download the compiled presentation"
                    },
                    "fileId": {
                      "type": "string",
                      "description": "Unique identifier of the compiled file"
                    },
                    "fileSize": {
                      "type": "integer",
                      "description": "Size of the compiled file in bytes"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/presentation-download": {
      "get": {
        "operationId": "downloadPresentation",
        "summary": "Get download URL for completed presentation",
        "description": "Get download URL for completed presentation",
        "parameters": [
          {
            "name": "presentationId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "ID of the presentation"
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string"
            },
            "description": "Download format (pptx or pdf)"
          }
        ],
        "responses": {
          "200": {
            "description": "Download URL retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "downloadUrl": {
                      "type": "string",
                      "description": "Pre-signed URL for download"
                    },
                    "expiresAt": {
                      "type": "string",
                      "description": "URL expiration timestamp"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/export-pdf": {
      "post": {
        "operationId": "exportToPDF",
        "summary": "Export presentation to PDF",
        "description": "Export presentation to PDF format",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "presentationId": {
                    "type": "string",
                    "description": "ID of the presentation"
                  },
                  "pdfSettings": {
                    "type": "object",
                    "description": "PDF export settings (quality, compression, security)"
                  },
                  "includeNotes": {
                    "type": "boolean",
                    "description": "Include speaker notes",
                    "default": false
                  },
                  "slidesPerPage": {
                    "type": "integer",
                    "description": "Number of slides per page",
                    "default": 1
                  }
                },
                "required": ["presentationId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "PDF exported successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "pdfUrl": {
                      "type": "string",
                      "description": "URL of the PDF file"
                    },
                    "fileSize": {
                      "type": "integer",
                      "description": "Size of the PDF file"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/validate-presentation": {
      "post": {
        "operationId": "validatePresentation",
        "summary": "Validate presentation integrity",
        "description": "Perform quality checks on presentations",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "presentationId": {
                    "type": "string",
                    "description": "ID of the presentation"
                  },
                  "validationRules": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Rules to validate"
                  }
                },
                "required": ["presentationId"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Validation completed",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "isValid": {
                      "type": "boolean",
                      "description": "Whether the presentation is valid"
                    },
                    "issues": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string"
                          },
                          "message": {
                            "type": "string"
                          },
                          "severity": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}


<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>é…ç½®è¿ç§»æŒ‡å— &mdash; AI PPT Assistant 1.0.0 æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=3bd3f67c" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=34088549"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=fd10adb8"></script>
      <script src="../_static/translations.js?v=beaddf03"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../genindex.html" />
    <link rel="search" title="æœç´¢" href="../search.html" />
    <link rel="prev" title="éƒ¨ç½²æ£€æŸ¥æ¸…å•" href="deployment-checklist.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../index.html" class="icon icon-home">
            AI PPT Assistant
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">ç”¨æˆ·æŒ‡å—</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/installation.html">å®‰è£…æŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/quickstart.html">å¿«é€Ÿå¼€å§‹</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">æ¶æ„è®¾è®¡</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../guides/architecture.html">ç³»ç»Ÿæ¶æ„</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ç°æœ‰æ–‡æ¡£</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="api.html">APIæ–‡æ¡£</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html#ai-ppt-assistant-api-documentation">AI PPT Assistant API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">éƒ¨ç½²æ–‡æ¡£</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html#ai-ppt-assistant-deployment-guide">AI PPT Assistant - Deployment Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment-checklist.html">éƒ¨ç½²æ£€æŸ¥æ¸…å•</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment-checklist.html#ai-ppt-assistant-deployment-checklist">AI PPT Assistant - Deployment Checklist</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">é…ç½®è¿ç§»æŒ‡å—</a></li>
<li class="toctree-l1"><a class="reference internal" href="#config">ğŸ”§ ç¯å¢ƒå˜é‡åˆ°Configæ–‡ä»¶è¿ç§»æŒ‡å—</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">ğŸ“‹ æ¦‚è¿°</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">ğŸ¯ è¿ç§»ä¼˜åŠ¿</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">ä¸ºä»€ä¹ˆè¦è¿ç§»ï¼Ÿ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id5">ğŸ—ï¸ æ–°é…ç½®æ¶æ„</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">ç›®å½•ç»“æ„</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">é…ç½®å±‚æ¬¡ç»“æ„</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">ğŸš€ è¿ç§»æ­¥éª¤</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#phase-1">Phase 1: ç¯å¢ƒå‡†å¤‡</a></li>
<li class="toctree-l3"><a class="reference internal" href="#phase-2">Phase 2: ä»£ç æ›´æ–°</a></li>
<li class="toctree-l3"><a class="reference internal" href="#phase-3">Phase 3: é€æ­¥æ›¿æ¢</a></li>
<li class="toctree-l3"><a class="reference internal" href="#phase-4">Phase 4: éƒ¨ç½²æ›´æ–°</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id9">ğŸ”§ é«˜çº§ç‰¹æ€§</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id10">1. å˜é‡æ’å€¼</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">2. ç¯å¢ƒç‰¹å®šé…ç½®è¦†ç›–</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id12">3. é…ç½®éªŒè¯å’Œç±»å‹å®‰å…¨</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id13">ğŸ“Š è¿ç§»éªŒè¯å’Œæµ‹è¯•</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">éªŒè¯æ¸…å•</a></li>
<li class="toctree-l3"><a class="reference internal" href="#a-b">A/Bæµ‹è¯•éƒ¨ç½²</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id15">ğŸ”’ å®‰å…¨è€ƒè™‘</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">æ•æ„Ÿä¿¡æ¯ç®¡ç†</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id17">ğŸš¨ æ•…éšœæ’é™¤</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id18">å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id19">ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id20">é…ç½®ç¼“å­˜ç­–ç•¥</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lambda">Lambdaå†·å¯åŠ¨ä¼˜åŒ–</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id21">ğŸ¯ è¿ç§»æ—¶é—´çº¿</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id22">âœ… è¿ç§»å®ŒæˆéªŒè¯</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id23">æœ€ç»ˆæ£€æŸ¥æ¸…å•</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AI PPT Assistant</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">é…ç½®è¿ç§»æŒ‡å—</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/existing/config-migration.md.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>é…ç½®è¿ç§»æŒ‡å—<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h1>
</section>
<section id="config">
<h1>ğŸ”§ ç¯å¢ƒå˜é‡åˆ°Configæ–‡ä»¶è¿ç§»æŒ‡å—<a class="headerlink" href="#config" title="Link to this heading">ïƒ</a></h1>
<section id="id2">
<h2>ğŸ“‹ æ¦‚è¿°<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h2>
<p>æœ¬æŒ‡å—æä¾›äº†ä»ç¯å¢ƒå˜é‡é…ç½®æ¨¡å¼è¿ç§»åˆ°YAMLé…ç½®æ–‡ä»¶çš„å®Œæ•´æ–¹æ¡ˆã€‚æ–°çš„é…ç½®ç³»ç»Ÿæä¾›æ›´å¥½çš„å¯ç»´æŠ¤æ€§ã€ç‰ˆæœ¬æ§åˆ¶æ”¯æŒå’Œç¯å¢ƒç®¡ç†ã€‚</p>
</section>
<section id="id3">
<h2>ğŸ¯ è¿ç§»ä¼˜åŠ¿<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h2>
<section id="id4">
<h3>ä¸ºä»€ä¹ˆè¦è¿ç§»ï¼Ÿ<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>æ–¹é¢</p></th>
<th class="head"><p>ç¯å¢ƒå˜é‡</p></th>
<th class="head"><p>Configæ–‡ä»¶</p></th>
<th class="head"><p>æ”¹è¿›</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>å¯ç»´æŠ¤æ€§</strong></p></td>
<td><p>åˆ†æ•£åœ¨42ä¸ªæ–‡ä»¶ä¸­</p></td>
<td><p>é›†ä¸­åŒ–é…ç½®</p></td>
<td><p>âœ… 90%å‡å°‘ç»´æŠ¤å¤æ‚åº¦</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ç‰ˆæœ¬æ§åˆ¶</strong></p></td>
<td><p>ä¸æ˜“è¿½è¸ªå˜æ›´</p></td>
<td><p>Gitå‹å¥½çš„YAML</p></td>
<td><p>âœ… å®Œæ•´çš„å˜æ›´å†å²</p></td>
</tr>
<tr class="row-even"><td><p><strong>ç¯å¢ƒç®¡ç†</strong></p></td>
<td><p>æ‰‹åŠ¨è®¾ç½®å·®å¼‚</p></td>
<td><p>ç¯å¢ƒç‰¹å®šæ–‡ä»¶</p></td>
<td><p>âœ… ä¸€é”®ç¯å¢ƒåˆ‡æ¢</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ç±»å‹å®‰å…¨</strong></p></td>
<td><p>å­—ç¬¦ä¸²ç±»å‹</p></td>
<td><p>å¼ºç±»å‹éªŒè¯</p></td>
<td><p>âœ… è¿è¡Œæ—¶é”™è¯¯å‡å°‘</p></td>
</tr>
<tr class="row-even"><td><p><strong>æ–‡æ¡£åŒ–</strong></p></td>
<td><p>æ³¨é‡Šå›°éš¾</p></td>
<td><p>å†…ç½®æ³¨é‡Šæ”¯æŒ</p></td>
<td><p>âœ… è‡ªæ–‡æ¡£åŒ–é…ç½®</p></td>
</tr>
<tr class="row-odd"><td><p><strong>æ•æ„Ÿä¿¡æ¯</strong></p></td>
<td><p>æ˜æ–‡å­˜å‚¨</p></td>
<td><p>SSM/Secretsé›†æˆ</p></td>
<td><p>âœ… å®‰å…¨æ€§æå‡</p></td>
</tr>
</tbody>
</table>
<p><code class="docutils literal notranslate"><span class="pre">â˜…</span> <span class="pre">Insight</span> <span class="pre">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></code>
å…³é”®æ¶æ„æ”¹è¿›ï¼š
â€¢ <strong>æ¸è¿›å¼è¿ç§»</strong>ï¼šå‘åå…¼å®¹ï¼Œé›¶åœæœºæ—¶é—´è¿ç§»
â€¢ <strong>æ™ºèƒ½å›é€€</strong>ï¼šConfigæ–‡ä»¶ â†’ ç¯å¢ƒå˜é‡ â†’ é»˜è®¤å€¼
â€¢ <strong>å˜é‡æ’å€¼</strong>ï¼šæ”¯æŒ ${ENV:VAR}ã€${SSM:path}ã€${SECRET:name}
<code class="docutils literal notranslate"><span class="pre">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span></code></p>
</section>
</section>
<section id="id5">
<h2>ğŸ—ï¸ æ–°é…ç½®æ¶æ„<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h2>
<section id="id6">
<h3>ç›®å½•ç»“æ„<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>config/
â”œâ”€â”€ default.yaml              # åŸºç¡€é…ç½®æ¨¡æ¿
â”œâ”€â”€ environments/
â”‚   â”œâ”€â”€ dev.yaml              # å¼€å‘ç¯å¢ƒé…ç½®  
â”‚   â”œâ”€â”€ staging.yaml          # é¢„å‘å¸ƒç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ prod.yaml             # ç”Ÿäº§ç¯å¢ƒé…ç½®
â””â”€â”€ migration_report.md       # è¿ç§»æŠ¥å‘Š
</pre></div>
</div>
</section>
<section id="id7">
<h3>é…ç½®å±‚æ¬¡ç»“æ„<a class="headerlink" href="#id7" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># é…ç½®ä¼˜å…ˆçº§ï¼šç¯å¢ƒç‰¹å®š &gt; é»˜è®¤é…ç½® &gt; ç¯å¢ƒå˜é‡ &gt; ç¡¬ç¼–ç é»˜è®¤å€¼</span>
<span class="nt">aws</span><span class="p">:</span><span class="w">                          </span><span class="c1"># AWSåŸºç¡€è®¾æ–½é…ç½®</span>
<span class="w">  </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;us-east-1&quot;</span>
<span class="w">  </span><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>

<span class="nt">services</span><span class="p">:</span><span class="w">                     </span><span class="c1"># æ ¸å¿ƒæœåŠ¡é…ç½®</span>
<span class="w">  </span><span class="nt">s3</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-ppt-assistant-dev-presentations&quot;</span>
<span class="w">    </span><span class="nt">lifecycle</span><span class="p">:</span>
<span class="w">      </span><span class="nt">transition_to_ia_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">dynamodb</span><span class="p">:</span>
<span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ai-ppt-assistant-dev-sessions&quot;</span>
<span class="w">    </span><span class="nt">ttl_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">7</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">bedrock</span><span class="p">:</span>
<span class="w">    </span><span class="nt">model_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;anthropic.claude-4-0&quot;</span>
<span class="w">    </span><span class="nt">orchestrator_agent_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SSM:/ai-ppt/agent/orchestrator-id}&quot;</span>

<span class="nt">performance</span><span class="p">:</span><span class="w">                  </span><span class="c1"># æ€§èƒ½é…ç½®</span>
<span class="w">  </span><span class="nt">lambda</span><span class="p">:</span>
<span class="w">    </span><span class="nt">memory_sizes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">create_outline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024</span>
<span class="w">      </span><span class="nt">compile_pptx</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3008</span>
<span class="w">  </span><span class="nt">max_concurrent_downloads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">  </span><span class="nt">cache_ttl_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3600</span>

<span class="nt">security</span><span class="p">:</span><span class="w">                     </span><span class="c1"># å®‰å…¨é…ç½®</span>
<span class="w">  </span><span class="nt">vpc_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">encryption_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">external_apis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">pexels_api_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SECRET:ai-ppt/pexels-key}&quot;</span>

<span class="nt">features</span><span class="p">:</span><span class="w">                     </span><span class="c1"># åŠŸèƒ½å¼€å…³</span>
<span class="w">  </span><span class="nt">enable_speaker_notes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">enable_image_generation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</section>
</section>
<section id="id8">
<h2>ğŸš€ è¿ç§»æ­¥éª¤<a class="headerlink" href="#id8" title="Link to this heading">ïƒ</a></h2>
<section id="phase-1">
<h3>Phase 1: ç¯å¢ƒå‡†å¤‡<a class="headerlink" href="#phase-1" title="Link to this heading">ïƒ</a></h3>
<p><strong>1. å®‰è£…ä¾èµ–</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># æ·»åŠ PyYAMLæ”¯æŒ</span>
pip<span class="w"> </span>install<span class="w"> </span><span class="nv">PyYAML</span><span class="o">==</span><span class="m">6</span>.0.1

<span class="c1"># æ›´æ–°Lambdaå±‚ä¾èµ–</span>
<span class="nb">cd</span><span class="w"> </span>lambdas/layers
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;PyYAML==6.0.1&quot;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>requirements.txt
./build.sh
</pre></div>
</div>
<p><strong>2. è¿è¡Œè¿ç§»è„šæœ¬</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># è‡ªåŠ¨å‘ç°å¹¶è¿ç§»ç¯å¢ƒå˜é‡</span>
<span class="nb">cd</span><span class="w"> </span>scripts
python<span class="w"> </span>migrate_to_config.py<span class="w"> </span>--dry-run<span class="w">  </span><span class="c1"># é¢„è§ˆè¿ç§»ç»“æœ</span>

<span class="c1"># æ‰§è¡Œå®é™…è¿ç§»</span>
python<span class="w"> </span>migrate_to_config.py<span class="w"> </span>--environments<span class="w"> </span>dev<span class="w"> </span>staging<span class="w"> </span>prod
</pre></div>
</div>
<p><strong>3. éªŒè¯ç”Ÿæˆçš„é…ç½®</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># æ£€æŸ¥ç”Ÿæˆçš„é…ç½®æ–‡ä»¶</span>
ls<span class="w"> </span>-la<span class="w"> </span>config/environments/
cat<span class="w"> </span>config/dev.yaml<span class="w">  </span><span class="c1"># æŸ¥çœ‹å¼€å‘ç¯å¢ƒé…ç½®</span>
</pre></div>
</div>
</section>
<section id="phase-2">
<h3>Phase 2: ä»£ç æ›´æ–°<a class="headerlink" href="#phase-2" title="Link to this heading">ïƒ</a></h3>
<p><strong>æ›´æ–°Lambdaå‡½æ•°ç¤ºä¾‹</strong></p>
<p><strong>æ—§ç‰ˆæœ¬ï¼ˆç¯å¢ƒå˜é‡ï¼‰ï¼š</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># æ—§æ–¹å¼ - åˆ†æ•£çš„ç¯å¢ƒå˜é‡</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="n">MODEL_ID</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;BEDROCK_MODEL_ID&#39;</span><span class="p">,</span> <span class="s1">&#39;anthropic.claude-4-0&#39;</span><span class="p">)</span>
<span class="n">S3_BUCKET</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;S3_BUCKET&#39;</span><span class="p">,</span> <span class="s1">&#39;default-bucket&#39;</span><span class="p">)</span>
<span class="n">MAX_SLIDES</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;MAX_SLIDES&#39;</span><span class="p">,</span> <span class="s1">&#39;20&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>æ–°ç‰ˆæœ¬ï¼ˆConfigæ–‡ä»¶ï¼‰ï¼š</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># æ–°æ–¹å¼ - ç»Ÿä¸€é…ç½®ç®¡ç†</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">utils.enhanced_config_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_enhanced_config_manager</span>

<span class="n">config_manager</span> <span class="o">=</span> <span class="n">get_enhanced_config_manager</span><span class="p">()</span>
<span class="n">bedrock_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_bedrock_config</span><span class="p">()</span>
<span class="n">s3_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_s3_config</span><span class="p">()</span>
<span class="n">performance_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_performance_config</span><span class="p">()</span>

<span class="n">MODEL_ID</span> <span class="o">=</span> <span class="n">bedrock_config</span><span class="o">.</span><span class="n">model_id</span>
<span class="n">S3_BUCKET</span> <span class="o">=</span> <span class="n">s3_config</span><span class="o">.</span><span class="n">bucket</span>
<span class="n">MAX_SLIDES</span> <span class="o">=</span> <span class="n">performance_config</span><span class="o">.</span><span class="n">max_slides</span>
</pre></div>
</div>
</section>
<section id="phase-3">
<h3>Phase 3: é€æ­¥æ›¿æ¢<a class="headerlink" href="#phase-3" title="Link to this heading">ïƒ</a></h3>
<p><strong>ç¤ºä¾‹ï¼šæ›´æ–° create_outline.py</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># åœ¨æ–‡ä»¶é¡¶éƒ¨æ·»åŠ </span>
<span class="kn">from</span><span class="w"> </span><span class="nn">utils.enhanced_config_manager</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">get_enhanced_config_manager</span><span class="p">,</span>
    <span class="n">get_enhanced_service_config</span><span class="p">,</span>
    <span class="n">get_enhanced_performance_config</span>
<span class="p">)</span>

<span class="c1"># æ›¿æ¢ç¯å¢ƒå˜é‡è·å–</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="c1"># è·å–é…ç½®ç®¡ç†å™¨</span>
    <span class="n">config_manager</span> <span class="o">=</span> <span class="n">get_enhanced_config_manager</span><span class="p">(</span>
        <span class="n">environment</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ENVIRONMENT&#39;</span><span class="p">,</span> <span class="s1">&#39;dev&#39;</span><span class="p">)</span>
    <span class="p">)</span>
    
    <span class="c1"># è·å–å„ç±»é…ç½®</span>
    <span class="n">bedrock_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_bedrock_config</span><span class="p">()</span>
    <span class="n">s3_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_s3_config</span><span class="p">()</span>
    <span class="n">performance_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_performance_config</span><span class="p">()</span>
    
    <span class="c1"># ä½¿ç”¨ç±»å‹åŒ–é…ç½®</span>
    <span class="n">MODEL_ID</span> <span class="o">=</span> <span class="n">bedrock_config</span><span class="o">.</span><span class="n">model_id</span>
    <span class="n">BUCKET_NAME</span> <span class="o">=</span> <span class="n">s3_config</span><span class="o">.</span><span class="n">bucket</span>
    <span class="n">MAX_SLIDES</span> <span class="o">=</span> <span class="n">performance_config</span><span class="o">.</span><span class="n">max_slides</span>
    
    <span class="c1"># é…ç½®éªŒè¯</span>
    <span class="n">validation_report</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">validate_configuration</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">validation_report</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Configuration validation failed&quot;</span><span class="p">,</span> 
                    <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;errors&quot;</span><span class="p">:</span> <span class="n">validation_report</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]})</span>
        <span class="k">return</span> <span class="n">create_error_response</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="s2">&quot;Configuration error&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="phase-4">
<h3>Phase 4: éƒ¨ç½²æ›´æ–°<a class="headerlink" href="#phase-4" title="Link to this heading">ïƒ</a></h3>
<p><strong>1. æ›´æ–°Terraformé…ç½®</strong></p>
<div class="highlight-hcl notranslate"><div class="highlight"><pre><span></span><span class="c1"># infrastructure/main.tf</span>
<span class="c1"># æ·»åŠ é…ç½®æ–‡ä»¶æ”¯æŒ</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_s3_object&quot;</span><span class="w"> </span><span class="nv">&quot;config_files&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">for_each</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">fileset</span><span class="p">(</span><span class="s2">&quot;${path.module}/../config/environments/&quot;, &quot;*.yaml&quot;</span><span class="p">)</span>
<span class="w">  </span>
<span class="w">  </span><span class="na">bucket</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.config_bucket.bucket</span>
<span class="w">  </span><span class="na">key</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;config/${each.value}&quot;</span>
<span class="w">  </span><span class="na">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;${path.module}/../config/environments/${each.value}&quot;</span>
<span class="w">  </span>
<span class="w">  </span><span class="na">etag</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">filemd5</span><span class="p">(</span><span class="s2">&quot;${path.module}/../config/environments/${each.value}&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># ç¯å¢ƒå˜é‡ä¼ é€’é…ç½®æ–‡ä»¶ä½ç½®</span>
<span class="kr">resource</span><span class="w"> </span><span class="nc">&quot;aws_lambda_function&quot;</span><span class="w"> </span><span class="nv">&quot;functions&quot;</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="na">for_each</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.lambda_functions</span>
<span class="w">  </span>
<span class="w">  </span><span class="nb">environment</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nb">variables</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="na">ENVIRONMENT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">var.environment</span>
<span class="w">      </span><span class="na">CONFIG_S3_BUCKET</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">aws_s3_bucket.config_bucket.bucket</span>
<span class="w">      </span><span class="na">CONFIG_S3_KEY</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;config/${var.environment}.yaml&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>2. æ›´æ–°éƒ¨ç½²è„šæœ¬</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># æ›´æ–°deploy.shæ·»åŠ é…ç½®æ–‡ä»¶åŒæ­¥</span>

<span class="c1"># åŒæ­¥é…ç½®æ–‡ä»¶åˆ°S3</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;ğŸ“ Uploading configuration files...&quot;</span>
aws<span class="w"> </span>s3<span class="w"> </span>sync<span class="w"> </span>config/<span class="w"> </span>s3://<span class="si">${</span><span class="nv">PROJECT_NAME</span><span class="si">}</span>-config-bucket/config/<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exclude<span class="w"> </span><span class="s2">&quot;*.md&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--exclude<span class="w"> </span><span class="s2">&quot;migration_report.md&quot;</span>

<span class="c1"># éªŒè¯é…ç½®æ–‡ä»¶</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;âœ… Validating configuration...&quot;</span>
python<span class="w"> </span>scripts/validate_config.py<span class="w"> </span>--environment<span class="w"> </span><span class="si">${</span><span class="nv">ENVIRONMENT</span><span class="si">}</span>
</pre></div>
</div>
</section>
</section>
<section id="id9">
<h2>ğŸ”§ é«˜çº§ç‰¹æ€§<a class="headerlink" href="#id9" title="Link to this heading">ïƒ</a></h2>
<section id="id10">
<h3>1. å˜é‡æ’å€¼<a class="headerlink" href="#id10" title="Link to this heading">ïƒ</a></h3>
<p><strong>ç¯å¢ƒå˜é‡å¼•ç”¨</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">aws</span><span class="p">:</span>
<span class="w">  </span><span class="nt">region</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${ENV:AWS_REGION}&quot;</span><span class="w">  </span><span class="c1"># ä»ç¯å¢ƒå˜é‡è·å–</span>
<span class="w">  </span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">s3</span><span class="p">:</span>
<span class="w">    </span><span class="nt">bucket</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${ENV:PROJECT_NAME}-${ENV:ENVIRONMENT}-presentations&quot;</span>
</pre></div>
</div>
<p><strong>SSMå‚æ•°å¼•ç”¨</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">bedrock</span><span class="p">:</span>
<span class="w">    </span><span class="nt">orchestrator_agent_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SSM:/ai-ppt-assistant/prod/bedrock/orchestrator-id}&quot;</span>
<span class="w">    </span><span class="nt">content_agent_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SSM:/ai-ppt-assistant/prod/bedrock/content-id}&quot;</span>
</pre></div>
</div>
<p><strong>Secrets Managerå¼•ç”¨</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">security</span><span class="p">:</span>
<span class="w">  </span><span class="nt">external_apis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">pexels_api_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SECRET:ai-ppt-assistant/pexels-api-key}&quot;</span>
<span class="w">    </span><span class="nt">unsplash_access_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SECRET:ai-ppt-assistant/unsplash-key}&quot;</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3>2. ç¯å¢ƒç‰¹å®šé…ç½®è¦†ç›–<a class="headerlink" href="#id11" title="Link to this heading">ïƒ</a></h3>
<p><strong>å¼€å‘ç¯å¢ƒä¼˜åŒ–</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># dev.yaml - å¼€å‘ç¯å¢ƒç‰¹å®šè®¾ç½®</span>
<span class="nt">performance</span><span class="p">:</span>
<span class="w">  </span><span class="nt">lambda</span><span class="p">:</span>
<span class="w">    </span><span class="nt">memory_sizes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">create_outline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">512</span><span class="w">      </span><span class="c1"># é™ä½å†…å­˜ä½¿ç”¨</span>
<span class="w">      </span><span class="nt">compile_pptx</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024</span><span class="w">      </span><span class="c1"># é™ä½æˆæœ¬</span>
<span class="w">  </span>
<span class="w">  </span><span class="nt">cache_ttl_seconds</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span><span class="w">       </span><span class="c1"># æ›´çŸ­çš„ç¼“å­˜æ—¶é—´</span>
<span class="w">  </span><span class="nt">max_slides</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w">               </span><span class="c1"># é™åˆ¶åŠŸèƒ½èŒƒå›´</span>

<span class="nt">development</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enable_debug_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">mock_bedrock_calls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">     </span><span class="c1"># é¿å…AIè°ƒç”¨æˆæœ¬</span>
<span class="w">  </span><span class="nt">fast_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">              </span><span class="c1"># è·³è¿‡æŸäº›éªŒè¯</span>
</pre></div>
</div>
<p><strong>ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># prod.yaml - ç”Ÿäº§ç¯å¢ƒç‰¹å®šè®¾ç½®</span>
<span class="nt">performance</span><span class="p">:</span>
<span class="w">  </span><span class="nt">lambda</span><span class="p">:</span>
<span class="w">    </span><span class="nt">memory_sizes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">compile_pptx</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3008</span><span class="w">       </span><span class="c1"># æœ€å¤§å†…å­˜æ”¯æŒå¤æ‚PPT</span>
<span class="w">    </span><span class="nt">reserved_concurrency</span><span class="p">:</span>
<span class="w">      </span><span class="nt">create_outline</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w">       </span><span class="c1"># æ›´é«˜å¹¶å‘</span>
<span class="w">  </span>
<span class="nt">security</span><span class="p">:</span>
<span class="w">  </span><span class="nt">vpc_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">encryption_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">enable_monitoring</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">production</span><span class="p">:</span>
<span class="w">  </span><span class="nt">backup_enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">auto_scaling</span><span class="p">:</span>
<span class="w">    </span><span class="nt">target_utilization</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">70</span>
<span class="w">    </span><span class="nt">max_capacity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
</pre></div>
</div>
</section>
<section id="id12">
<h3>3. é…ç½®éªŒè¯å’Œç±»å‹å®‰å…¨<a class="headerlink" href="#id12" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># è‡ªåŠ¨é…ç½®éªŒè¯</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="n">config_manager</span> <span class="o">=</span> <span class="n">get_enhanced_config_manager</span><span class="p">()</span>
    
    <span class="c1"># éªŒè¯é…ç½®å®Œæ•´æ€§</span>
    <span class="n">validation_report</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">validate_configuration</span><span class="p">()</span>
    
    <span class="k">if</span> <span class="n">validation_report</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Critical configuration errors found&quot;</span><span class="p">,</span> 
                    <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;errors&quot;</span><span class="p">:</span> <span class="n">validation_report</span><span class="p">[</span><span class="s1">&#39;errors&#39;</span><span class="p">]})</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Configuration validation failed&quot;</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">validation_report</span><span class="p">[</span><span class="s1">&#39;warnings&#39;</span><span class="p">]:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Configuration warnings&quot;</span><span class="p">,</span> 
                      <span class="n">extra</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;warnings&quot;</span><span class="p">:</span> <span class="n">validation_report</span><span class="p">[</span><span class="s1">&#39;warnings&#39;</span><span class="p">]})</span>
    
    <span class="c1"># è·å–ç±»å‹åŒ–é…ç½®</span>
    <span class="n">performance_config</span> <span class="o">=</span> <span class="n">config_manager</span><span class="o">.</span><span class="n">get_performance_config</span><span class="p">()</span>
    
    <span class="c1"># IDEè‡ªåŠ¨è¡¥å…¨å’Œç±»å‹æ£€æŸ¥</span>
    <span class="n">max_memory</span> <span class="o">=</span> <span class="n">performance_config</span><span class="o">.</span><span class="k">lambda</span><span class="o">.</span><span class="n">memory_sizes</span><span class="p">[</span><span class="s2">&quot;compile_pptx&quot;</span><span class="p">]</span>  <span class="c1"># ç±»å‹ï¼šint</span>
    <span class="n">timeout</span> <span class="o">=</span> <span class="n">performance_config</span><span class="o">.</span><span class="k">lambda</span><span class="o">.</span><span class="n">timeouts</span><span class="p">[</span><span class="s2">&quot;compile_pptx&quot;</span><span class="p">]</span>         <span class="c1"># ç±»å‹ï¼šint</span>
</pre></div>
</div>
</section>
</section>
<section id="id13">
<h2>ğŸ“Š è¿ç§»éªŒè¯å’Œæµ‹è¯•<a class="headerlink" href="#id13" title="Link to this heading">ïƒ</a></h2>
<section id="id14">
<h3>éªŒè¯æ¸…å•<a class="headerlink" href="#id14" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. é…ç½®æ–‡ä»¶è¯­æ³•éªŒè¯</span>
python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;import yaml; yaml.safe_load(open(&#39;config/environments/prod.yaml&#39;))&quot;</span>

<span class="c1"># 2. é…ç½®å®Œæ•´æ€§éªŒè¯</span>
python<span class="w"> </span>scripts/validate_config.py<span class="w"> </span>--environment<span class="w"> </span>prod<span class="w"> </span>--strict

<span class="c1"># 3. å‘åå…¼å®¹æ€§æµ‹è¯•</span>
<span class="nv">ENV_VAR_MODE</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>python<span class="w"> </span>test_lambda_function.py
<span class="nv">CONFIG_FILE_MODE</span><span class="o">=</span><span class="nb">true</span><span class="w"> </span>python<span class="w"> </span>test_lambda_function.py

<span class="c1"># 4. ç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•</span>
make<span class="w"> </span>test-e2e<span class="w"> </span><span class="nv">ENVIRONMENT</span><span class="o">=</span>dev<span class="w"> </span><span class="nv">CONFIG_MODE</span><span class="o">=</span>file
</pre></div>
</div>
</section>
<section id="a-b">
<h3>A/Bæµ‹è¯•éƒ¨ç½²<a class="headerlink" href="#a-b" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># æ”¯æŒA/Bæµ‹è¯•çš„é…ç½®åŠ è½½</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_config_with_fallback</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;æ”¯æŒæ¸è¿›å¼è¿ç§»çš„é…ç½®è·å–&quot;&quot;&quot;</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># å°è¯•åŠ è½½é…ç½®æ–‡ä»¶</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;USE_CONFIG_FILE&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;true&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">get_enhanced_config_manager</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Config file loading failed, falling back to env vars: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    
    <span class="c1"># å›é€€åˆ°åŸæœ‰çš„ConfigManager</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">utils.config_manager</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_config_manager</span>
    <span class="k">return</span> <span class="n">get_config_manager</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="id15">
<h2>ğŸ”’ å®‰å…¨è€ƒè™‘<a class="headerlink" href="#id15" title="Link to this heading">ïƒ</a></h2>
<section id="id16">
<h3>æ•æ„Ÿä¿¡æ¯ç®¡ç†<a class="headerlink" href="#id16" title="Link to this heading">ïƒ</a></h3>
<p><strong>1. Secrets Manageré›†æˆ</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ç”Ÿäº§ç¯å¢ƒé…ç½®</span>
<span class="nt">security</span><span class="p">:</span>
<span class="w">  </span><span class="nt">external_apis</span><span class="p">:</span>
<span class="w">    </span><span class="nt">pexels_api_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SECRET:ai-ppt-assistant/prod/pexels-api-key}&quot;</span>
<span class="w">    </span><span class="nt">openai_api_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SECRET:ai-ppt-assistant/prod/openai-api-key}&quot;</span>
<span class="w">    </span>
<span class="w">  </span><span class="nt">database</span><span class="p">:</span>
<span class="w">    </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;${SECRET:ai-ppt-assistant/prod/db-password}&quot;</span>
</pre></div>
</div>
<p><strong>2. IAMæƒé™æ›´æ–°</strong></p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;Version&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;Statement&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;ssm:GetParameter&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;ssm:GetParameters&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:ssm:*:*:parameter/ai-ppt-assistant/*&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;Effect&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;Action&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;secretsmanager:GetSecretValue&quot;</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;Resource&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:secretsmanager:*:*:secret:ai-ppt-assistant/*&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>3. é…ç½®æ–‡ä»¶åŠ å¯†</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ä½¿ç”¨AWS KMSåŠ å¯†æ•æ„Ÿé…ç½®</span>
aws<span class="w"> </span>kms<span class="w"> </span>encrypt<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--key-id<span class="w"> </span>arn:aws:kms:us-east-1:123456789012:key/12345678-1234-1234-1234-123456789012<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--plaintext<span class="w"> </span>fileb://config/environments/prod.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--output<span class="w"> </span>text<span class="w"> </span>--query<span class="w"> </span>CiphertextBlob<span class="w"> </span><span class="p">|</span><span class="w"> </span>base64<span class="w"> </span>-d<span class="w"> </span>&gt;<span class="w"> </span>config/environments/prod.yaml.encrypted
</pre></div>
</div>
</section>
</section>
<section id="id17">
<h2>ğŸš¨ æ•…éšœæ’é™¤<a class="headerlink" href="#id17" title="Link to this heading">ïƒ</a></h2>
<section id="id18">
<h3>å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ<a class="headerlink" href="#id18" title="Link to this heading">ïƒ</a></h3>
<p><strong>1. PyYAMLå¯¼å…¥å¤±è´¥</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ç—‡çŠ¶ï¼šImportError: No module named &#39;yaml&#39;</span>
<span class="c1"># è§£å†³æ–¹æ¡ˆï¼š</span>
pip<span class="w"> </span>install<span class="w"> </span><span class="nv">PyYAML</span><span class="o">==</span><span class="m">6</span>.0.1
<span class="c1"># æˆ–è€…åœ¨Lambdaå±‚ä¸­ç¡®ä¿åŒ…å«PyYAML</span>
</pre></div>
</div>
<p><strong>2. é…ç½®æ–‡ä»¶è·¯å¾„é—®é¢˜</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ç—‡çŠ¶ï¼šFileNotFoundError: config file not found</span>
<span class="c1"># è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼æŒ‡å®šé…ç½®ç›®å½•</span>
<span class="n">config_manager</span> <span class="o">=</span> <span class="n">get_enhanced_config_manager</span><span class="p">(</span>
    <span class="n">environment</span><span class="o">=</span><span class="s1">&#39;prod&#39;</span><span class="p">,</span>
    <span class="n">config_dir</span><span class="o">=</span><span class="s1">&#39;/opt/python/config&#39;</span>  <span class="c1"># Lambdaå±‚ä¸­çš„è·¯å¾„</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>3. å˜é‡æ’å€¼å¤±è´¥</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># ç—‡çŠ¶ï¼šé…ç½®å€¼ä»ä¸º ${SSM:...} å­—ç¬¦ä¸²</span>
<span class="c1"># è§£å†³æ–¹æ¡ˆï¼šæ£€æŸ¥IAMæƒé™å’Œå‚æ•°å­˜åœ¨æ€§</span>
aws<span class="w"> </span>ssm<span class="w"> </span>get-parameter<span class="w"> </span>--name<span class="w"> </span><span class="s2">&quot;/ai-ppt-assistant/prod/bedrock/agent-id&quot;</span><span class="w"> </span>--with-decryption
</pre></div>
</div>
<p><strong>4. ç±»å‹è½¬æ¢é”™è¯¯</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ç—‡çŠ¶ï¼šExpected int but got str</span>
<span class="c1"># è§£å†³æ–¹æ¡ˆï¼šç¡®ä¿YAMLç±»å‹æ­£ç¡®</span>
<span class="nt">performance</span><span class="p">:</span>
<span class="w">  </span><span class="nt">max_slides</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">20</span><span class="w">          </span><span class="c1"># âœ… æ­£ç¡®ï¼šæ•´æ•°</span>
<span class="w">  </span><span class="nt">max_slides</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="w">        </span><span class="c1"># âŒ é”™è¯¯ï¼šå­—ç¬¦ä¸²</span>
<span class="w">  </span><span class="nt">enable_cache</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w">      </span><span class="c1"># âœ… æ­£ç¡®ï¼šå¸ƒå°”å€¼</span>
<span class="w">  </span><span class="nt">enable_cache</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w">    </span><span class="c1"># âŒ é”™è¯¯ï¼šå­—ç¬¦ä¸²</span>
</pre></div>
</div>
</section>
</section>
<section id="id19">
<h2>ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–<a class="headerlink" href="#id19" title="Link to this heading">ïƒ</a></h2>
<section id="id20">
<h3>é…ç½®ç¼“å­˜ç­–ç•¥<a class="headerlink" href="#id20" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">EnhancedConfigManager</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cache_ttl</span> <span class="o">=</span> <span class="mi">300</span>  <span class="c1"># 5åˆ†é’Ÿç¼“å­˜</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config_cache</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_last_loaded</span> <span class="o">=</span> <span class="kc">None</span>
    
    <span class="k">def</span><span class="w"> </span><span class="nf">get_config_with_cache</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">force_reload</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">force_reload</span> <span class="ow">or</span> 
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_loaded</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> 
            <span class="p">(</span><span class="n">now</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_last_loaded</span><span class="p">)</span><span class="o">.</span><span class="n">seconds</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cache_ttl</span><span class="p">):</span>
            
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_configuration</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_last_loaded</span> <span class="o">=</span> <span class="n">now</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config_cache</span>
</pre></div>
</div>
</section>
<section id="lambda">
<h3>Lambdaå†·å¯åŠ¨ä¼˜åŒ–<a class="headerlink" href="#lambda" title="Link to this heading">ïƒ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># å…¨å±€åˆå§‹åŒ–é…ç½®ç®¡ç†å™¨</span>
<span class="n">config_manager</span> <span class="o">=</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_global_config_manager</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;å¤ç”¨é…ç½®ç®¡ç†å™¨å®ä¾‹ï¼Œå‡å°‘å†·å¯åŠ¨æ—¶é—´&quot;&quot;&quot;</span>
    <span class="k">global</span> <span class="n">config_manager</span>
    <span class="k">if</span> <span class="n">config_manager</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">config_manager</span> <span class="o">=</span> <span class="n">get_enhanced_config_manager</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">config_manager</span>

<span class="k">def</span><span class="w"> </span><span class="nf">lambda_handler</span><span class="p">(</span><span class="n">event</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="c1"># å¤ç”¨å…¨å±€é…ç½®ç®¡ç†å™¨</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">get_global_config_manager</span><span class="p">()</span>
    
    <span class="c1"># ... Lambdaå‡½æ•°é€»è¾‘</span>
</pre></div>
</div>
</section>
</section>
<section id="id21">
<h2>ğŸ¯ è¿ç§»æ—¶é—´çº¿<a class="headerlink" href="#id21" title="Link to this heading">ïƒ</a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>é˜¶æ®µ</p></th>
<th class="head"><p>æŒç»­æ—¶é—´</p></th>
<th class="head"><p>ä¸»è¦ä»»åŠ¡</p></th>
<th class="head"><p>é£é™©çº§åˆ«</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Phase 1</strong></p></td>
<td><p>1-2å¤©</p></td>
<td><p>ç¯å¢ƒå‡†å¤‡ã€è„šæœ¬æ‰§è¡Œã€é…ç½®ç”Ÿæˆ</p></td>
<td><p>ä½</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Phase 2</strong></p></td>
<td><p>3-5å¤©</p></td>
<td><p>ä»£ç æ›´æ–°ã€å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•</p></td>
<td><p>ä¸­</p></td>
</tr>
<tr class="row-even"><td><p><strong>Phase 3</strong></p></td>
<td><p>2-3å¤©</p></td>
<td><p>éƒ¨ç½²æ›´æ–°ã€A/Bæµ‹è¯•ã€ç›‘æ§è®¾ç½®</p></td>
<td><p>ä¸­é«˜</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Phase 4</strong></p></td>
<td><p>1-2å¤©</p></td>
<td><p>å…¨é‡åˆ‡æ¢ã€éªŒè¯ã€æ¸…ç†</p></td>
<td><p>ä½</p></td>
</tr>
</tbody>
</table>
<p><strong>æ€»è®¡ï¼š7-12å¤©</strong></p>
</section>
<section id="id22">
<h2>âœ… è¿ç§»å®ŒæˆéªŒè¯<a class="headerlink" href="#id22" title="Link to this heading">ïƒ</a></h2>
<section id="id23">
<h3>æœ€ç»ˆæ£€æŸ¥æ¸…å•<a class="headerlink" href="#id23" title="Link to this heading">ïƒ</a></h3>
<ul class="contains-task-list simple">
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> æ‰€æœ‰ç¯å¢ƒçš„é…ç½®æ–‡ä»¶å·²ç”Ÿæˆå¹¶éªŒè¯</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> PyYAMLä¾èµ–å·²æ·»åŠ åˆ°Lambdaå±‚</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> è‡³å°‘2ä¸ªLambdaå‡½æ•°å·²è¿ç§»å¹¶æµ‹è¯•</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> A/Bæµ‹è¯•æ˜¾ç¤ºæ–°é…ç½®ç³»ç»Ÿå·¥ä½œæ­£å¸¸</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> æ•æ„Ÿä¿¡æ¯å·²è¿ç§»åˆ°Secrets Manager</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> ç›‘æ§å’Œå‘Šè­¦æ­£å¸¸å·¥ä½œ</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> éƒ¨ç½²è„šæœ¬å·²æ›´æ–°</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> å›¢é˜Ÿæˆå‘˜å·²åŸ¹è®­æ–°é…ç½®ç³»ç»Ÿ</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> å›é€€æ–¹æ¡ˆå·²å‡†å¤‡å¹¶æµ‹è¯•</p></li>
<li class="task-list-item"><p><input class="task-list-item-checkbox" disabled="disabled" type="checkbox"> æ–‡æ¡£å·²æ›´æ–°</p></li>
</ul>
<p>æ­å–œï¼ä½ å·²æˆåŠŸå®Œæˆä»ç¯å¢ƒå˜é‡åˆ°Configæ–‡ä»¶çš„è¿ç§»ã€‚æ–°çš„é…ç½®ç³»ç»Ÿå°†ä¸ºä½ çš„é¡¹ç›®å¸¦æ¥æ›´å¥½çš„å¯ç»´æŠ¤æ€§ã€å®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§ã€‚</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="é¡µè„š">
        <a href="deployment-checklist.html" class="btn btn-neutral float-left" title="éƒ¨ç½²æ£€æŸ¥æ¸…å•" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2025, AI PPT Assistant Teamã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>